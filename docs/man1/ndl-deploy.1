.\" Automatically generated by Pandoc 3.1.3
.\"
.\" Define V font for inline verbatim, using C font in formats
.\" that render this, and otherwise B font.
.ie "\f[CB]x\f[]"x" \{\
. ftr V B
. ftr VI BI
. ftr VB B
. ftr VBI BI
.\}
.el \{\
. ftr V CR
. ftr VI CI
. ftr VB CB
. ftr VBI CBI
.\}
.TH "" "" "" "" ""
.hy
.SH NDL
.TP
Date
2024-03-08
.SH COMMAND \f[I]\[aq]ndl\f[R] deploy\[aq]
.PP
usage: ndl deploy [-h] [-q] [-d] [--kernel-src KSRC] [--local-build]
[--tmpdir-path TMPDIR_PATH] [--keep-tmpdir] [-H HOSTNAME] [-U USERNAME]
[-K PRIVKEY] [-T TIMEOUT]
.PP
Compile and deploy ndl helpers and drivers to the SUT (System Under
Test), which can be can be either local or a remote host, depending on
the \[aq]-H\[aq] option.
By default, everything is built on the SUT, but the
\[aq]--local-build\[aq] can be used for building on the local system.
The drivers are searched for in the following directories (and in the
following order) on the local host: ./drivers/idle,
$WULT_DATA_PATH/drivers/idle, $HOME/.local/share/wult/drivers/idle,
/usr/local/share/wult/drivers/idle, /usr/share/wult/drivers/idle.
The ndl tool also depends on the following helpers: ndl-helper,
wult-freq-helper.
These helpers will be compiled on the SUT and deployed to the SUT.
The sources of the helpers are searched for in the following paths (and
in the following order) on the local host: ./helpers,
$WULT_DATA_PATH/helpers, $HOME/.local/share/wult/helpers,
/usr/local/share/wult/helpers, /usr/share/wult/helpers.
By default, helpers are deployed to the path defined by the
\[aq]WULT_HELPERSPATH\[aq] environment variable.
If the variable is not defined, helpers are deployed to
\[aq]$HOME/.local/bin\[aq], where \[aq]$HOME\[aq] is the home directory
of user \[aq]USERNAME\[aq] on host \[aq]HOST\[aq] (see \[aq]--host\[aq]
and \[aq]--username\[aq] options).
.SS OPTIONS \f[I]\[aq]ndl\f[R] deploy\[aq]
.TP
\f[B]-h\f[R]
Show this help message and exit.
.TP
\f[B]-q\f[R]
Be quiet.
.TP
\f[B]-d\f[R]
Print debugging information.
.TP
\f[B]--kernel-src\f[R] \f[I]KSRC\f[R]
Path to the Linux kernel sources to build drivers and eBPF helpers
against.
The default is \[aq]/lib/modules/$(uname -r)/build\[aq] on the SUT.
If \[aq]--local-build\[aq] was used, then the path is considered to be
on the local system, rather than the SUT.
.TP
\f[B]--local-build\f[R]
Build helpers and drivers locally, instead of building on HOSTNAME (the
SUT).
.TP
\f[B]--tmpdir-path\f[R] \f[I]TMPDIR_PATH\f[R]
When \[aq]ndl\[aq] is deployed, a random temporary directory is used.
Use this option provide a custom path instead.
It will be used as a temporary directory on both local and remote hosts.
This option is meant for debugging purposes.
.TP
\f[B]--keep-tmpdir\f[R]
Do not remove the temporary directories created while deploying
\[aq]ndl\[aq].
This option is meant for debugging purposes.
.TP
\f[B]-H\f[R] \f[I]HOSTNAME\f[R], \f[B]--host\f[R] \f[I]HOSTNAME\f[R]
Name of the host to run the command on.
.TP
\f[B]-U\f[R] \f[I]USERNAME\f[R], \f[B]--username\f[R] \f[I]USERNAME\f[R]
Name of the user to use for logging into the remote host over SSH.
The default user name is \[aq]root\[aq].
.TP
\f[B]-K\f[R] \f[I]PRIVKEY\f[R], \f[B]--priv-key\f[R] \f[I]PRIVKEY\f[R]
Path to the private SSH key that should be used for logging into the
remote host.
By default the key is automatically found from standard paths like
\[aq]\[ti]/.ssh\[aq].
.TP
\f[B]-T\f[R] \f[I]TIMEOUT\f[R], \f[B]--timeout\f[R] \f[I]TIMEOUT\f[R]
SSH connect timeout in seconds, default is 8.
